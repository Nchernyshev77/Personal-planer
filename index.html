<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Persanal Planer</title>
  <link rel="stylesheet" href="./style.css?v=40" />
</head>
<body>
  <div id="app" class="app" data-theme="dark">
    <header class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true">✓</div>
        <div class="titles">
          <div class="title">Persanal Planer</div>
        </div>
        <span id="versionBadge" class="versionBadge">v40</span>
      </div>
</header>

    <main class="content">
      <aside class="composer card">
        <form id="addForm" class="add-form" autocomplete="off">
          <textarea id="taskInput" class="input textarea" rows="1" placeholder="Добавить задачу…" maxlength="600"></textarea>
          <button class="btn primary" type="submit">Добавить</button>
        </form>

        <div class="row">
          <div class="chips" aria-label="Цвет метки по умолчанию">
            <span class="label">Цвет:</span>
            <button type="button" class="chip" data-color="none" aria-label="Без"></button>
            <button type="button" class="chip" data-color="blue" aria-label="Синяя"></button>
            <button type="button" class="chip" data-color="yellow" aria-label="Жёлтая"></button>
            <button type="button" class="chip" data-color="red" aria-label="Красная"></button>
            <button type="button" class="chip" data-color="purple" aria-label="Фиолетовая"></button>
            <button type="button" class="chip" data-color="green" aria-label="Зелёная"></button>
          </div>
        </div>

        <div class="row storage">
          <div class="storage-left">
            <button id="btnConnectFile" class="btn" type="button">Подключить tasks.txt</button>
            <div id="saveStatus" class="status under">…</div>
          </div>
        </div>

        <div id="help" class="help" hidden>
          <ul>
            <li><b>Перетаскивание:</b> тяните за «⋮⋮».</li>
            <li><b>Редактирование:</b> клик по тексту → редактируйте прямо в задаче.</li>
            <li><b>Цвет:</b> слева у задачи цветной прямоугольник — клик, чтобы сменить.</li>
            <li><b>Выполнено:</b> галочка появляется только у завершённой задачи.</li>
            <li><b>Время:</b> справа внизу часы на задачу. Вверху — сумма.</li>
          </ul>
        </div>
      </aside>

      <section class="list card">
        <div class="panelActions">
          <button id="btnPip" class="btn ghost action" title="Картинка-в-картинке / поверх окон"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
  <rect x="4.5" y="4.5" width="15" height="15" rx="2.5" stroke="currentColor" stroke-width="1.6" fill="none"/>
  <rect x="12.5" y="12.5" width="6" height="6" rx="1.4" stroke="currentColor" stroke-width="1.6" fill="none"/>
</svg></button>
        <button id="btnHelp" class="btn ghost action" title="Подсказки"><svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
  <circle cx="12" cy="12" r="8.25" stroke="currentColor" stroke-width="1.6" fill="none"/>
  <path d="M9.7 9.8c.4-1.2 1.4-2 2.9-2 1.6 0 2.7.9 2.7 2.3 0 1.1-.6 1.7-1.6 2.3-.8.5-1.1.9-1.1 1.9v.3" stroke="currentColor" stroke-width="1.6" fill="none" stroke-linecap="round"/>
  <circle cx="12" cy="16.9" r="0.9" fill="currentColor"/>
</svg></button>
        </div>
        <div class="list-head">
          <div class="list-title">Задачи</div>

          <div class="list-tools">
            <div class="total-box" title="Сумма часов по всем задачам">
              <span>Всего</span>
              <b id="totalTime">0 ч</b>
            </div>            <button id="btnClearDone" class="btn dangerSoft" type="button">Удалить выполненные</button>
            <button id="btnClearAll" class="btn dangerSoft" type="button">Удалить все</button>
          </div>
        </div>

        <div class="tasksStage">
  <svg id="connLayer" class="connectors" aria-hidden="true"></svg>
  <div id="tasks" class="tasks" role="list"></div>
</div>

        <div id="empty" class="empty" hidden></div>
      </section>
    </main>
  </div>

  <template id="tplTask">
    <div class="task" role="listitem">
      <button class="drag" type="button" title="Перетащить" aria-label="Перетащить">⋮⋮</button>

      <div class="colorwrap">
        <button class="colorbar" type="button" title="Цвет" aria-label="Цвет"></button>
        <div class="palette" hidden>
        <button type="button" class="pcolor" data-color="none" aria-label="Без"></button>
        <button type="button" class="pcolor" data-color="blue" aria-label="Синяя"></button>
        <button type="button" class="pcolor" data-color="yellow" aria-label="Жёлтая"></button>
        <button type="button" class="pcolor" data-color="red" aria-label="Красная"></button>
        <button type="button" class="pcolor" data-color="purple" aria-label="Фиолетовая"></button>
        <button type="button" class="pcolor" data-color="green" aria-label="Зелёная"></button>
        </div>
      </div>

      <button class="check" type="button" title="Готово" aria-label="Готово"></button>

      <div class="text" role="textbox" tabindex="0"></div>

      <div class="rightSide">
<button class="del" type="button" title="Удалить" aria-label="Удалить">✕</button>

        <div class="timeWrap" title="Время (часы)">
          <input class="time" type="text" inputmode="decimal" placeholder="0" />
          <span class="timeUnit">ч</span>
        </div>
      </div>
      <button class="collapse" type="button" aria-label="Свернуть подзадачи" title="Свернуть/развернуть"><span class="chev">▾</span><span class="hiddenCount" aria-hidden="true"></span></button>
      <div class="subzone" aria-hidden="true"></div>
      <button class="subzoneHit" type="button" aria-label="Добавить подзадачу"></button>
      <div class="subzoneLabel" aria-hidden="true">+ подзадача</div>
    </div></template>

  <script type="module" src="./app.js?v=40"></script>
</body>
</html>
